!function(e,n){"use strict";function t(e){return"string"==typeof e}function r(e){return e instanceof Array}function i(e){return"function"==typeof e}function a(e,t){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(t),e=e===n?t:a(e,t)),e}function o(e,n,t){var r=a(n,t);return n!==r&&e&&(e.children=r),r}function l(e,n,t){var r=o(null,s(e,n));return r.dom||(r.dom=t.firstChild,"<"===r.tag&&(r.domLength=t.childNodes.length)),r}function f(e,n,t){var r=e[n],i=a(r,t);return r!==i&&(e[n]=i),i}function d(e,t,r){return i(t)&&(t=t(r),t===n&&(t=r),e.children=t),t}function s(e,n){return 1===n?e[0]:e}function u(e,n,t){var r,i=n.dom,a=n.domLength||1,o=t&&t.dom;if(i!==o)for(;a--;)r=a>0?i.nextSibling:null,o?e.insertBefore(i,o):e.appendChild(i),i=r}function c(){return ee.createTextNode("")}function v(e,n,t){if(e.insertAdjacentHTML){var r,i,a;if(Y||Z){var o="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;o&&3===o.nodeType&&(r=o,Z&&0===o.length&&(a=!0,o.nodeValue=" "),Y&&(i=o.length))}e.insertAdjacentHTML(n,t),r&&(Y&&r.length!==i&&r.splitText(i),Z&&a&&(r.nodeValue=""))}else if(fe.innerHTML=t,"beforebegin"===n)for(var l=e.parentNode;fe.firstChild;)l.insertBefore(fe.firstChild,e);else if("beforeend"===n)for(;fe.firstChild;)e.appendChild(fe.firstChild)}function h(e,n,t,r){if(t){var i=t.dom;if(r){var a=t.domLength||1;1===a?(J(t),e.replaceChild(n,i)):(e.insertBefore(n,i),P(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function g(e,t,r,i,a,o){if(le)return p(e,t,i,a);var l,f=e.tag,d=e.children;switch(f){case n:return T(e,d,t,r,i,a);case"#":if(o)return void O(t,d);l=ee.createTextNode(d);break;case"!":l=ee.createComment(d);break;case"<":if(d){if(o)t.innerHTML=d;else{var s=t.childNodes,u=s.length;if(i){var g=i.dom,b=g.previousSibling;v(g,"beforebegin",d),l=b?b.nextSibling:t.firstChild}else v(t,"beforeend",d),l=s[u];e.dom=l,e.domLength=s.length-u,a&&i&&P(t,i)}return}l=c();break;default:var x;switch(f){case"svg":x="http://www.w3.org/2000/svg";break;case"math":x="http://www.w3.org/1998/Math/MathML";break;default:x=r}var y=e.attrs,C=y&&y.is;x?(e.ns=x,l=C?ee.createElementNS(x,f,C):ee.createElementNS(x,f)):l=C?ee.createElement(f,C):ee.createElement(f),e.dom=l,le&&t&&h(t,l,i,a),"string"==typeof d?O(l,d,!1):A(l,e,x,d,!1),y&&w(l,f,x,y);var k=e.events;k&&M(l,e,k),!le&&t&&h(t,l,i,a);var L=k&&k.$created;return void(L&&m(L,"$created",l,e))}e.dom=l,t&&h(t,l,i,a)}function m(e,n,t,i,a,o){var l={type:n,target:t,virtualNode:i};if(a&&(l[a]=o),r(e)){for(var f=0;f<e.length;f++)if(e[f].call(t,l)===!1)return}else e.call(t,l)}function p(e,n,t,r){var i,a=b(e);if(n){var o;t||n.hasChildNodes()?(t?(o=t.dom.previousSibling,v(t.dom,"beforebegin",a),r&&P(n,t)):(o=n.lastChild,v(n,"beforeend",a)),i=o?o.nextSibling:n.firstChild):(n.innerHTML=a,i=n.firstChild)}else fe.innerHTML=a,i=fe.removeChild(fe.firstChild);x(i,e)}function b(e,r){var i=e.tag,a=e.children;switch(i){case"#":return C(a)+he;case"!":return"<!--"+k(a)+"-->";case"<":return a+he;default:var l;if(i){var u=e.attrs;if("select"===i&&u?r={selectedIndex:u.selectedIndex,value:u.value,optionIndex:0}:"option"===i&&r&&((r.value&&r.value===u.value||r.selectedIndex!==n&&r.selectedIndex===r.optionIndex)&&(u.selected=!0),r.optionIndex++),l="<"+i,u){l+=" ";for(var c in u){var v=u[c];if(v!==!1&&("select"!==i||"value"!==c&&"selectedIndex"!==c))if("textarea"!==i||"value"!==c){if(v===!0)v="";else if("style"===c&&!t(v)){var h="";for(var g in v)h+=g+": "+v[g]+"; ";v=h}l+=" "+L(c,v)}else a=v}}}else l="";i&&(l+=">"),a=d(e,a);var m=j(a);if(m>1)for(var p=0,x=a.length;x>p;p++)l+=b(f(a,p),r);else if(0!==m){var y=s(a,m);t(y)?(l+=C(y),i&&y||(l+=he)):l+=b(o(e,y),r)}else i||(l+=he);return i&&(l+="</"+i+">"),l}}function x(e,n){var r=n.tag;if(r){n.dom=e;var i,a;switch(r){case"#":i=e.nodeValue,a=i.indexOf(he),-1!==a&&(a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a));break;case"!":break;case"<":for(var o,l=0;e;e=e.nextSibling)if(l++,3===e.nodeType){if(i=e.nodeValue,l>1&&i===he){o=e.nextSibling,e.parentNode.removeChild(e),l--;break}if(a=i.indexOf(he),-1!==a){a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a),o=e.nextSibling;break}}return n.domLength=l,o;default:var f=n.children,d=j(f);if(d>1){f=n.children;for(var u=e.firstChild,c=0,v=f.length;v>c;c++)u=x(u,f[c])}else if(0!==d){var h=s(f,d);t(h)?h||(e.firstChild.nodeValue=""):x(e.firstChild,h)}var g=n.events;if(g){M(e,n,g);var p=g.$created;p&&m(p,"$created",e,n)}}return e.nextSibling}return y(e,n)}function y(e,n){var t,r=n.children,i=j(r);if(0===i)e.length>1&&e.splitText(1),e.nodeValue="",n.dom=e,t=e.nextSibling;else{if(i>1){t=e;for(var a=0;a<r.length;a++)t=x(t,r[a]);e=r[0].dom}else{var l=o(n,s(r,i));t=x(e,l),e=l.dom}n.dom=e;for(var f=0;e!==t;)f++,e=e.nextSibling;n.domLength=f}return t}function C(e){return e=""+e,ae?(fe.innerText=e,e=fe.innerHTML):e=oe?e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function k(e){return e=""+e,e.replace(/-{2,}/g,"-")}function L(e,n){var t=typeof n;return n=""+n,"number"!==t&&(n=oe?n.split("&").join("&amp;").split('"').join("&quot;"):n.replace(/&/g,"&amp;").replace(/"/g,"&quot;")),e+'="'+n+'"'}function T(e,n,t,r,i,a){n=d(e,n);var l,u,v,m=j(n);if(r&&(e.ns=r),0===m)l=c(),h(t,l,i,a);else if(m>1){u=0;for(var p=0,b=n.length;b>p;p++)v=f(n,p),g(v,t,r,i,!1),u+=v.domLength||1;l=n[0].dom,a&&P(t,i)}else v=o(e,s(n,m)),g(v,t,r,i,a),l=v.dom,u=v.domLength;e.dom=l,e.domLength=u}function w(e,t,r,i,a,o){var l,f;if(i)for(f in i){var d=!1,s=i[f];if("style"===f){var u=a&&a[f];u!==s&&(d=E(e,u,i,s))}else S(t,f)?e[f]!==s&&(e[f]=s,d=!0):a&&a[f]===s||("class"!==f||r?N(e,f,s):e.className=s,d=!0);d&&o&&(l||(l=[])).push(f)}if(a)for(f in a)i&&i[f]!==n||("class"!==f||r?S(t,f)||e.removeAttribute(f):e.className="",o&&(l||(l=[])).push(f));return l}function N(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(-1!==i){var a=n.substr(0,i);switch(a){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function E(e,r,i,a){var o,l=!1;if(!(t(a)||ce&&r&&!t(r))){var f="";if(a)for(o in a)f+=o+": "+a[o]+"; ";a=f,ce||(i.style=a)}var d=e.style;if(t(a))d.cssText=a,l=!0;else{if(a)for(o in a){var s=a[o];if(!r||r[o]!==s){var u=s.indexOf("!important");if(-1!==u)d.setProperty(o,s.substr(0,u),"important");else{if(r){var c=r[o];c&&-1!==c.indexOf("!important")&&d.removeProperty(o)}d.setProperty(o,s,"")}l=!0}}if(r)for(o in r)a&&a[o]!==n||(d.removeProperty(o),l=!0)}return l}function M(e,n,t,r){var i;if(t){e.virtualNode=n;for(i in t)r&&r[i]||$(e,i)}if(r)for(i in r)t&&t[i]||V(e,i)}function S(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function $(e,n){if("$"!==n[0])if(se)e.addEventListener(n,D,!1);else{var t="on"+n;t in e?e[t]=D:e.attachEvent(t,D)}}function V(e,n){if("$"!==n[0])if(se)e.removeEventListener(n,D,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,D)}}function A(e,n,r,i,a){i=d(n,i);var l=j(i);if(l>1)for(var u=0,c=i.length;c>u;u++)g(f(i,u),e,r);else if(0!==l){var v=s(i,l);!a&&t(v)?O(e,v):(v=o(n,v),g(v,e,r,null,!1,!a))}}function j(e){return r(e)?e.length:e||t(e)?-1:0}function H(e,n,r){r>1?I(e,n,0,n.length):0!==r&&(t(n)?e.removeChild(e.firstChild):P(e,l(n,r,e)))}function I(e,n,t,r){for(;r>t;t++)P(e,n[t])}function P(e,n){J(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function O(e,n,t){if(n)de?e.textContent=n:e.innerText=n;else{if(t)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(c())}}function B(e,n,r,i,a,c,v){if(a=d(n,a,i),a!==i){var h=j(i);if(0===h)return void A(e,n,r,a,!1);var m,p,b=j(a);if(0===b)return void H(e,i,h);if(2>b){if(p=s(a,b),!c&&t(p)){if(b===h){if(m=s(i,h),p===m)return;if(t(m))return void(e.firstChild.nodeValue=p)}return Q(i,h),void O(e,p,!0)}if(2>h)return m=l(i,h,e),p=o(n,p,m),void z(m,p,e,r,null,0,v,!c)}-1===b&&(n.children=a=[a]),2>h&&(m=l(i,h,e),1===h?i[0]=m:i=[m]);var x,y=i.length,C=a.length,k=y-1,L=a.length-1,T=0,w=0,N=!0;e:for(;N&&k>=T&&L>=w;){N=!1;var E,M,S,$;for(E=i[T],S=f(a,w,E);E.key===S.key;){if(z(E,S,e,r,i,T+1,v),T++,w++,T>k||w>L)break e;E=i[T],S=f(a,w,E),N=!0}for(M=i[k],$=f(a,L);M.key===$.key;){if(z(M,$,e,r,a,L+1,v),k--,L--,T>k||w>L)break e;M=i[k],$=f(a,L),N=!0}for(;E.key===$.key;){if(x=C>L+1?a[L+1]:v,z(E,$,e,r,null,0,x),u(e,$,x),T++,L--,T>k||w>L)break e;E=i[T],$=f(a,L),N=!0}for(;M.key===S.key;){if(x=y>T?i[T]:v,z(M,S,e,r,null,0,x),u(e,S,x),k--,w++,T>k||w>L)break e;M=i[k],S=f(a,w),N=!0}}if(T>k)for(x=C>L+1?f(a,L+1):v,V=w;L>=V;V++)g(f(a,V),e,r,x);else if(w>L)I(e,i,T,k+1);else{var V,B=i[k+1],D={};for(V=k;V>=T;V--)m=i[V],m.next=B,D[m.key]=m,B=m;for(x=C>L+1?f(a,L+1):v,V=L;V>=w;V--){p=a[V];var q=p.key;m=D[q],m?(D[q]=null,B=m.next,z(m,p,e,r,null,0,x),(B&&B.key)!==(x&&x.key)&&u(e,p,x)):g(p,e,r,x),x=p}for(V=T;k>=V;V++)m=i[V],null!==D[m.key]&&P(e,m)}}}function D(e){e=K(e,this);var n=e.currentTarget,t=n.virtualNode.events[e.type];if(r(t)){for(var i=0,a=t.length;a>i;i++)if(W(t[i],n,e),ge){ge=!1;break}}else W(t,n,e)}function q(){this.defaultPrevented=!0,this.returnValue=!1}function R(){this.cancelBubble=!0}function F(){ge=!0,this.stopPropagation()}function K(n,t){return n||(n=e.event,n.preventDefault||(n.preventDefault=q,n.stopPropagation=R,n.defaultPrevented=n.returnValue===!1,n.target=n.srcElement),n.currentTarget=t.nodeType?t:n.target),n.stopImmediatePropagation=F,n}function W(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){re.error(r.stack||r)}}function z(e,t,r,i,a,o,l,f){if(t!==e){var d=t.tag;if(e.tag!==d)g(t,r,i,e,!0);else{var s=e.dom,u=e.children,c=t.children;switch(d){case n:var v=a&&o<a.length?a[o]:l;G(e,u,t,c,r,i,v);break;case"#":case"!":u!==c&&(s.nodeValue=c),t.dom=s;break;case"<":u!==c?g(t,r,null,e,!0,f):(t.dom=e.dom,t.domLength=e.domLength);break;default:var h=t.attrs,p=e.attrs;if((h&&h.is)!==(p&&p.is))return void g(t,r,i,e,!0);var b=e.ns;b&&(t.ns=b),t.dom=s,c!==u&&B(s,t,b,u,c,!1);var x=t.events,y=e.events;if(h!==p){var C=x&&x.$changed,k=w(s,d,b,h,p,!!C);k&&m(C,"$changed",s,t,"changes",k)}x!==y&&M(s,t,x,y),void 0!==x&&void 0!==x.$subtreeModified&&m(x.$subtreeModified,"$subtreeModified",s,t)}}}}function G(e,n,t,i,a,o,l){if(i=d(t,i,n),i!==n){var f,s,u=j(i),v=j(n);if(o&&(t.ns=o),0===u)0===v?f=e.dom:(H(a,n,v),f=c(),h(a,f,l));else{if(0===v)return a.removeChild(e.dom),void T(t,i,a,o,l);if(B(a,t,o,n,i,!0,l),i=t.children,r(i)){f=i[0].dom,s=0;for(var g=0,m=i.length;m>g;g++)s+=i[g].domLength||1}else f=i.dom,s=i.domLength}t.dom=f,t.domLength=s}}function J(e){if(!t(e)){var r=e.dom;if(r){var i=e.events;if(i){for(var a in i)V(r,a);var o=i.$destroyed;o&&m(o,"$destroyed",r,e)}r.virtualNode&&(r.virtualNode=n)}var l=e.children;l&&Q(l,j(l))}}function Q(e,n){if(n>1)for(var t=0,r=e.length;r>t;t++)J(e[t]);else 0!==n&&J(s(e,n))}function U(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}function X(e){e&&e!=ee.body&&e!=ee.activeElement&&e.focus()}var Y,Z,_={},ee=e.document,ne=e.navigator,te=function(){},re=e.console||{warn:te,error:te},ie=ne.userAgent,ae=-1!==ie.indexOf("WebKit"),oe=-1!==ie.indexOf("Firefox"),le=-1!==ie.indexOf("Trident"),fe=ee.createElement("div"),de="textContent"in ee,se="addEventListener"in ee,ue="createRange"in ee,ce="setProperty"in fe.style,ve=ee.createElement("p");ve.insertAdjacentHTML&&(ve.appendChild(ee.createTextNode("a")),ve.insertAdjacentHTML("beforeend","b"),Y=1===ve.childNodes.length,ve=ee.createElement("p"),ve.appendChild(c()),ve.insertAdjacentHTML("beforeend","<b>"),Z=3!==ve.firstChild.nodeType);{var he="",ge=(ue?ee.createRange():null,!1);_.vdom={create:function(e){return e=a(e),g(e),e},append:function(e,n){return n=a(n),g(n,e),n},update:function(e,n){var t=ee.activeElement;return n=a(n,e),z(e,n,e.dom.parentNode),U(n,e),X(t),e},updateChildren:function(e,n){var t=ee.activeElement,r=e.children;r!==n&&B(e.dom,e,e.ns,r,n,!e.tag),X(t)},remove:function(e){var n=e.dom.parentNode;P(n,e)}}}"function"==typeof define&&define.amd?define([],function(){return _}):e.cito=_}(window);