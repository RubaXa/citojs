!function(e,n){"use strict";function t(e){return"string"==typeof e}function r(e){return e instanceof Array}function i(e){return"function"==typeof e}function a(e,t){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(t),e=e===n?t:a(e,t)),e}function o(e,n,t){var r=a(n,t);return n!==r&&e&&(e.children=r),r}function f(e,n,t){var r=o(null,s(e,n));return r.dom||(r.dom=t.firstChild,"<"===r.tag&&(r.domLength=t.childNodes.length)),r}function l(e,n,t){var r=e[n],i=a(r,t);return r!==i&&(e[n]=i),i}function d(e,t,r){return i(t)&&(t=t(r),t===n&&(t=r),e.children=t),t}function s(e,n){return 1===n?e[0]:e}function u(e,n,t){var r,i=n.dom,a=n.domLength||1,o=t&&t.dom;if(i!==o)for(;a--;)r=a>0?i.nextSibling:null,o?e.insertBefore(i,o):e.appendChild(i),i=r}function c(){return ne.createTextNode("")}function v(e,n,t){if(e.insertAdjacentHTML){var r,i,a;if(Z||_){var o="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;o&&3===o.nodeType&&(r=o,_&&0===o.length&&(a=!0,o.nodeValue=" "),Z&&(i=o.length))}e.insertAdjacentHTML(n,t),r&&(Z&&r.length!==i&&r.splitText(i),_&&a&&(r.nodeValue=""))}else if(de.innerHTML=t,"beforebegin"===n)for(var f=e.parentNode;de.firstChild;)f.insertBefore(de.firstChild,e);else if("beforeend"===n)for(;de.firstChild;)e.appendChild(de.firstChild)}function h(e,n,t,r){if(t){var i=t.dom;if(r){var a=t.domLength||1;1===a?(Q(t),e.replaceChild(n,i)):(e.insertBefore(n,i),I(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function g(e,t,r,i,a,o){if(le)return p(e,t,i,a);var f,l=e.tag,d=e.children;switch(l){case n:return T(e,d,t,r,i,a);case"#":if(o)return void O(t,d);f=ne.createTextNode(d);break;case"!":f=ne.createComment(d);break;case"<":if(d){if(o)t.innerHTML=d;else{var s=t.childNodes,u=s.length;if(i){var g=i.dom,b=g.previousSibling;v(g,"beforebegin",d),f=b?b.nextSibling:t.firstChild}else v(t,"beforeend",d),f=s[u];e.dom=f,e.domLength=s.length-u,a&&i&&I(t,i)}return}f=c();break;default:var x;switch(l){case"svg":x="http://www.w3.org/2000/svg";break;case"math":x="http://www.w3.org/1998/Math/MathML";break;default:x=r}var y=e.attrs,C=y&&y.is;x?(e.ns=x,f=C?ne.createElementNS(x,l,C):ne.createElementNS(x,l)):f=C?ne.createElement(l,C):ne.createElement(l),e.dom=f,le&&t&&h(t,f,i,a),"string"==typeof d?O(f,d,!1):V(f,e,x,d,!1),y&&w(f,l,x,y);var k=e.events;k&&M(f,e,k),!le&&t&&h(t,f,i,a);var L=k&&k.$created;return void(L&&m(L,"$created",f,e))}e.dom=f,t&&h(t,f,i,a)}function m(e,n,t,i,a,o){var f={type:n,target:t,virtualNode:i};if(a&&(f[a]=o),r(e)){for(var l=0;l<e.length;l++)if(e[l].call(t,f)===!1)return}else e.call(t,f)}function p(e,n,t,r){var i,a=b(e);if(n){var o;t||n.hasChildNodes()?(t?(o=t.dom.previousSibling,v(t.dom,"beforebegin",a),r&&I(n,t)):(o=n.lastChild,v(n,"beforeend",a)),i=o?o.nextSibling:n.firstChild):(n.innerHTML=a,i=n.firstChild)}else de.innerHTML=a,i=de.removeChild(de.firstChild);x(i,e)}function b(e,r){var i=e.tag,a=e.children;switch(i){case"#":return C(a)+ge;case"!":return"<!--"+k(a)+"-->";case"<":return a+ge;default:var f;if(i){var u=e.attrs;if("select"===i&&u?r={selectedIndex:u.selectedIndex,value:u.value,optionIndex:0}:"option"===i&&r&&((r.value&&r.value===u.value||r.selectedIndex!==n&&r.selectedIndex===r.optionIndex)&&(u.selected=!0),r.optionIndex++),f="<"+i,u){f+=" ";for(var c in u){var v=u[c];if(v!==!1&&("select"!==i||"value"!==c&&"selectedIndex"!==c))if("textarea"!==i||"value"!==c){if(v===!0)v="";else if("style"===c&&!t(v)){var h="";for(var g in v)h+=g+": "+v[g]+"; ";v=h}f+=" "+L(c,v)}else a=v}}}else f="";i&&(f+=">"),a=d(e,a);var m=A(a);if(m>1)for(var p=0,x=a.length;x>p;p++)f+=b(l(a,p),r);else if(0!==m){var y=s(a,m);t(y)?(f+=C(y),i&&y||(f+=ge)):f+=b(o(e,y),r)}else i||(f+=ge);return i&&(f+="</"+i+">"),f}}function x(e,n){var r=n.tag;if(r){n.dom=e;var i,a;switch(r){case"#":i=e.nodeValue,a=i.indexOf(ge),-1!==a&&(a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a));break;case"!":break;case"<":for(var o,f=0;e;e=e.nextSibling)if(f++,3===e.nodeType){if(i=e.nodeValue,f>1&&i===ge){o=e.nextSibling,e.parentNode.removeChild(e),f--;break}if(a=i.indexOf(ge),-1!==a){a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a),o=e.nextSibling;break}}return n.domLength=f,o;default:var l=n.children,d=A(l);if(d>1){l=n.children;for(var u=e.firstChild,c=0,v=l.length;v>c;c++)u=x(u,l[c])}else if(0!==d){var h=s(l,d);t(h)?h||(e.firstChild.nodeValue=""):x(e.firstChild,h)}var g=n.events;if(g){M(e,n,g);var p=g.$created;p&&m(p,"$created",e,n)}}return e.nextSibling}return y(e,n)}function y(e,n){var t,r=n.children,i=A(r);if(0===i)e.length>1&&e.splitText(1),e.nodeValue="",n.dom=e,t=e.nextSibling;else{if(i>1){t=e;for(var a=0;a<r.length;a++)t=x(t,r[a]);e=r[0].dom}else{var f=o(n,s(r,i));t=x(e,f),e=f.dom}n.dom=e;for(var l=0;e!==t;)l++,e=e.nextSibling;n.domLength=l}return t}function C(e){return e=""+e,oe?(de.innerText=e,e=de.innerHTML):e=fe?e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function k(e){return e=""+e,e.replace(/-{2,}/g,"-")}function L(e,n){var t=typeof n;return n=""+n,"number"!==t&&(n=fe?n.split("&").join("&amp;").split('"').join("&quot;"):n.replace(/&/g,"&amp;").replace(/"/g,"&quot;")),e+'="'+n+'"'}function T(e,n,t,r,i,a){n=d(e,n);var f,u,v,m=A(n);if(r&&(e.ns=r),0===m)f=c(),h(t,f,i,a);else if(m>1){u=0;for(var p=0,b=n.length;b>p;p++)v=l(n,p),g(v,t,r,i,!1),u+=v.domLength||1;f=n[0].dom,a&&I(t,i)}else v=o(e,s(n,m)),g(v,t,r,i,a),f=v.dom,u=v.domLength;e.dom=f,e.domLength=u}function w(e,t,r,i,a,o){var f,l;if(i)for(l in i){var d=!1,s=i[l];if("style"===l){var u=a&&a[l];u!==s&&(d=E(e,u,i,s))}else S(t,l)?e[l]!==s&&(e[l]=s,d=!0):a&&a[l]===s||("class"!==l||r?N(e,l,s):e.className=s,d=!0);d&&o&&(f||(f=[])).push(l)}if(a)for(l in a)i&&i[l]!==n||("class"!==l||r?S(t,l)||e.removeAttribute(l):e.className="",o&&(f||(f=[])).push(l));return f}function N(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(-1!==i){var a=n.substr(0,i);switch(a){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function E(e,r,i,a){var o,f=!1;if(!(t(a)||ve&&r&&!t(r))){var l="";if(a)for(o in a)l+=o+": "+a[o]+"; ";a=l,ve||(i.style=a)}var d=e.style;if(t(a))d.cssText=a,f=!0;else{if(a)for(o in a){var s=a[o];if(!r||r[o]!==s){var u=s.indexOf("!important");if(-1!==u)d.setProperty(o,s.substr(0,u),"important");else{if(r){var c=r[o];c&&-1!==c.indexOf("!important")&&d.removeProperty(o)}d.setProperty(o,s,"")}f=!0}}if(r)for(o in r)a&&a[o]!==n||(d.removeProperty(o),f=!0)}return f}function M(e,n,t,r){var i;if(t){e.virtualNode=n;for(i in t)r&&r[i]||P(e,i)}if(r)for(i in r)t&&t[i]||$(e,i)}function S(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function P(e,n){if("$"!==n[0])if(ue)e.addEventListener(n,D,!1);else{var t="on"+n;t in e?e[t]=D:e.attachEvent(t,D)}}function $(e,n){if("$"!==n[0])if(ue)e.removeEventListener(n,D,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,D)}}function V(e,n,r,i,a){i=d(n,i);var f=A(i);if(f>1)for(var u=0,c=i.length;c>u;u++)g(l(i,u),e,r);else if(0!==f){var v=s(i,f);!a&&t(v)?O(e,v):(v=o(n,v),g(v,e,r,null,!1,!a))}}function A(e){return r(e)?e.length:e||t(e)?-1:0}function j(e,n,r){r>1?H(e,n,0,n.length):0!==r&&(t(n)?e.removeChild(e.firstChild):I(e,f(n,r,e)))}function H(e,n,t,r){for(;r>t;t++)I(e,n[t])}function I(e,n){Q(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function O(e,n,t){if(n)se?e.textContent=n:e.innerText=n;else{if(t)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(c())}}function B(e,n,r,i,a,c,v){if(a=d(n,a,i),a!==i){var h=A(i);if(0===h)return void V(e,n,r,a,!1);var m,p,b=A(a);if(0===b)return void j(e,i,h);if(2>b){if(p=s(a,b),!c&&t(p)){if(b===h){if(m=s(i,h),p===m)return;if(t(m))return void(e.firstChild.nodeValue=p)}return U(i,h),void O(e,p,!0)}if(2>h)return m=f(i,h,e),p=o(n,p,m),void G(m,p,e,r,null,0,v,!c)}-1===b&&(n.children=a=[a]),2>h&&(m=f(i,h,e),1===h?i[0]=m:i=[m]);var x,y=i.length,C=a.length,k=y-1,L=a.length-1,T=0,w=0,N=!0;e:for(;N&&k>=T&&L>=w;){N=!1;var E,M,S,P;for(E=i[T],S=l(a,w,E);E.key===S.key;){if(G(E,S,e,r,i,T+1,v),T++,w++,T>k||w>L)break e;E=i[T],S=l(a,w,E),N=!0}for(M=i[k],P=l(a,L);M.key===P.key;){if(G(M,P,e,r,a,L+1,v),k--,L--,T>k||w>L)break e;M=i[k],P=l(a,L),N=!0}for(;E.key===P.key;){if(x=C>L+1?a[L+1]:v,G(E,P,e,r,null,0,x),u(e,P,x),T++,L--,T>k||w>L)break e;E=i[T],P=l(a,L),N=!0}for(;M.key===S.key;){if(x=y>T?i[T]:v,G(M,S,e,r,null,0,x),u(e,S,x),k--,w++,T>k||w>L)break e;M=i[k],S=l(a,w),N=!0}}if(T>k)for(x=C>L+1?l(a,L+1):v,$=w;L>=$;$++)g(l(a,$),e,r,x);else if(w>L)H(e,i,T,k+1);else{var $,B=i[k+1],D={};for($=k;$>=T;$--)m=i[$],m.next=B,D[m.key]=m,B=m;for(x=C>L+1?l(a,L+1):v,$=L;$>=w;$--){p=a[$];var q=p.key;m=D[q],m?(D[q]=null,B=m.next,G(m,p,e,r,null,0,x),(B&&B.key)!==(x&&x.key)&&u(e,p,x)):g(p,e,r,x),x=p}for($=T;k>=$;$++)m=i[$],null!==D[m.key]&&I(e,m)}}}function D(e){e=W(e,this);var n=e.currentTarget,t=n.virtualNode.events[e.type];if(r(t)){for(var i=0,a=t.length;a>i;i++)if(z(t[i],n,e),me){me=!1;break}}else z(t,n,e)}function q(){return this.defaultPrevented}function R(){this.defaultPrevented=!0,this.returnValue=!1}function F(){this.cancelBubble=!0}function K(){me=!0,this.stopPropagation()}function W(n,t){return n||(n=e.event,n.isDefaultPrevented||(n.isDefaultPrevented=q),n.preventDefault||(n.preventDefault=R,n.stopPropagation=F,n.defaultPrevented=n.returnValue===!1,n.target=n.srcElement),n.currentTarget=t.nodeType?t:n.target),n.stopImmediatePropagation=K,n}function z(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){ie.error(r.stack||r)}}function G(e,t,r,i,a,o,f,l){if(t!==e){var d=t.tag;if(e.tag!==d)g(t,r,i,e,!0);else{var s=e.dom,u=e.children,c=t.children;switch(d){case n:var v=a&&o<a.length?a[o]:f;J(e,u,t,c,r,i,v);break;case"#":case"!":u!==c&&(s.nodeValue=c),t.dom=s;break;case"<":u!==c?g(t,r,null,e,!0,l):(t.dom=e.dom,t.domLength=e.domLength);break;default:var h=t.attrs,p=e.attrs;if((h&&h.is)!==(p&&p.is))return void g(t,r,i,e,!0);var b=e.ns;b&&(t.ns=b),t.dom=s,c!==u&&B(s,t,b,u,c,!1);var x=t.events,y=e.events;if(h!==p){var C=x&&x.$changed,k=w(s,d,b,h,p,!!C);k&&m(C,"$changed",s,t,"changes",k)}x!==y&&M(s,t,x,y),void 0!==x&&void 0!==x.$subtreeModified&&m(x.$subtreeModified,"$subtreeModified",s,t)}}}}function J(e,n,t,i,a,o,f){if(i=d(t,i,n),i!==n){var l,s,u=A(i),v=A(n);if(o&&(t.ns=o),0===u)0===v?l=e.dom:(j(a,n,v),l=c(),h(a,l,f));else{if(0===v)return a.removeChild(e.dom),void T(t,i,a,o,f);if(B(a,t,o,n,i,!0,f),i=t.children,r(i)){l=i[0].dom,s=0;for(var g=0,m=i.length;m>g;g++)s+=i[g].domLength||1}else l=i.dom,s=i.domLength}t.dom=l,t.domLength=s}}function Q(e){if(!t(e)){var r=e.dom;if(r){var i=e.events;if(i){for(var a in i)$(r,a);var o=i.$destroyed;o&&m(o,"$destroyed",r,e)}r.virtualNode&&(r.virtualNode=n)}var f=e.children;f&&U(f,A(f))}}function U(e,n){if(n>1)for(var t=0,r=e.length;r>t;t++)Q(e[t]);else 0!==n&&Q(s(e,n))}function X(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}function Y(e){e&&e!=ne.body&&e!=ne.activeElement&&e.focus()}var Z,_,ee={},ne=e.document,te=e.navigator,re=function(){},ie=e.console||{warn:re,error:re},ae=te.userAgent,oe=-1!==ae.indexOf("WebKit"),fe=-1!==ae.indexOf("Firefox"),le=-1!==ae.indexOf("Trident"),de=ne.createElement("div"),se="textContent"in ne,ue="addEventListener"in ne,ce="createRange"in ne,ve="setProperty"in de.style,he=ne.createElement("p");he.insertAdjacentHTML&&(he.appendChild(ne.createTextNode("a")),he.insertAdjacentHTML("beforeend","b"),Z=1===he.childNodes.length,he=ne.createElement("p"),he.appendChild(c()),he.insertAdjacentHTML("beforeend","<b>"),_=3!==he.firstChild.nodeType);{var ge="",me=(ce?ne.createRange():null,!1);ee.vdom={create:function(e){return e=a(e),g(e),e},append:function(e,n){return n=a(n),g(n,e),n},update:function(e,n){var t=ne.activeElement;return n=a(n,e),G(e,n,e.dom.parentNode),X(n,e),Y(t),e},updateChildren:function(e,n){var t=ne.activeElement,r=e.children;r!==n&&B(e.dom,e,e.ns,r,n,!e.tag),Y(t)},remove:function(e){var n=e.dom.parentNode;I(n,e)}}}"function"==typeof define&&define.amd?define([],function(){return ee}):e.cito=ee}(window);