!function(e){define([],function(){return"undefined"==typeof window?{vdom:{}}:e(window)})}(function(e,n){"use strict";function t(e){return"string"==typeof e}function r(e){return e instanceof Array}function i(e){return"function"==typeof e}function o(e,t){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(t),e=e===n?t:o(e,t)),e}function a(e,n,t){var r=o(n,t);return n!==r&&e&&(e.children=r),r}function l(e,n,t){var r=a(null,s(e,n));return r.dom||(r.dom=t.firstChild,"<"===r.tag&&(r.domLength=t.childNodes.length)),r}function f(e,n,t){var r=e[n],i=o(r,t);return r!==i&&(e[n]=i),i}function d(e,t,r){return i(t)&&(t=t(r),t===n&&(t=r),e.children=t),t}function s(e,n){return 1===n?e[0]:e}function u(e,n,t){var r,i=n.dom,o=n.domLength||1,a=t&&t.dom;if(i!==a)for(;o--;)r=o>0?i.nextSibling:null,a?e.insertBefore(i,a):e.appendChild(i),i=r}function c(){return ne.createTextNode("")}function v(e,n,t){if(e.insertAdjacentHTML){var r,i,o;if(Y||Z){var a="beforebegin"===n?e.previousSibling:"beforeend"===n?e.lastChild:null;a&&3===a.nodeType&&(r=a,Z&&0===a.length&&(o=!0,a.nodeValue=" "),Y&&(i=a.length))}e.insertAdjacentHTML(n,t),r&&(Y&&r.length!==i&&r.splitText(i),Z&&o&&(r.nodeValue=""))}else if(de.innerHTML=t,"beforebegin"===n)for(var l=e.parentNode;de.firstChild;)l.insertBefore(de.firstChild,e);else if("beforeend"===n)for(;de.firstChild;)e.appendChild(de.firstChild)}function h(e,n,t,r){if(t){var i=t.dom;if(r){var o=t.domLength||1;1===o?(G(t),e.replaceChild(n,i)):(e.insertBefore(n,i),I(e,t))}else e.insertBefore(n,i)}else e.appendChild(n)}function g(e,t,r,i,o,a){if(fe)return p(e,t,i,o);var l,f=e.tag,d=e.children;switch(f){case n:return T(e,d,t,r,i,o);case"#":if(a)return void O(t,d);l=ne.createTextNode(d);break;case"!":l=ne.createComment(d);break;case"<":if(d){if(a)t.innerHTML=d;else{var s=t.childNodes,u=s.length;if(i){var g=i.dom,b=g.previousSibling;v(g,"beforebegin",d),l=b?b.nextSibling:t.firstChild}else v(t,"beforeend",d),l=s[u];e.dom=l,e.domLength=s.length-u,o&&i&&I(t,i)}return}l=c();break;default:var x;switch(f){case"svg":x="http://www.w3.org/2000/svg";break;case"math":x="http://www.w3.org/1998/Math/MathML";break;default:x=r}var y=e.attrs,C=y&&y.is;x?(e.ns=x,l=C?ne.createElementNS(x,f,C):ne.createElementNS(x,f)):l=C?ne.createElement(f,C):ne.createElement(f),e.dom=l,fe&&t&&h(t,l,i,o),"string"==typeof d?O(l,d,!1):V(l,e,x,d,!1),y&&w(l,f,x,y);var k=e.events;k&&S(l,e,k),!fe&&t&&h(t,l,i,o);var L=k&&k.$created;return void(L&&m(L,"$created",l,e))}e.dom=l,t&&h(t,l,i,o)}function m(e,n,t,i,o,a){var l={type:n,target:t,virtualNode:i};if(o&&(l[o]=a),r(e)){for(var f=0;f<e.length;f++)if(e[f].call(t,l)===!1)return}else e.call(t,l)}function p(e,n,t,r){var i,o=b(e);if(n){var a;t||n.hasChildNodes()?(t?(a=t.dom.previousSibling,v(t.dom,"beforebegin",o),r&&I(n,t)):(a=n.lastChild,v(n,"beforeend",o)),i=a?a.nextSibling:n.firstChild):(n.innerHTML=o,i=n.firstChild)}else de.innerHTML=o,i=de.removeChild(de.firstChild);x(i,e)}function b(e,r){var i=e.tag,o=e.children;switch(i){case"#":return C(o)+me;case"!":return"<!--"+k(o)+"-->";case"<":return o+me;default:var l;if(i){var u=e.attrs;if("select"===i&&u?r={selectedIndex:u.selectedIndex,value:u.value,optionIndex:0}:"option"===i&&r&&((r.value&&r.value===u.value||r.selectedIndex!==n&&r.selectedIndex===r.optionIndex)&&(u.selected=!0),r.optionIndex++),l="<"+i,u){l+=" ";for(var c in u){var v=u[c];if(v!==!1&&("select"!==i||"value"!==c&&"selectedIndex"!==c))if("textarea"!==i||"value"!==c){if(v===!0)v="";else if("style"===c&&!t(v)){var h="";for(var g in v)h+=g+": "+v[g]+"; ";v=h}l+=" "+L(c,v)}else o=v}}}else l="";i&&(l+=">"),o=d(e,o);var m=A(o);if(m>1)for(var p=0,x=o.length;p<x;p++)l+=b(f(o,p),r);else if(0!==m){var y=s(o,m);t(y)?(l+=C(y),i&&y||(l+=me)):l+=b(a(e,y),r)}else i||(l+=me);return i&&(l+="</"+i+">"),l}}function x(e,n){var r=n.tag;if(r){n.dom=e;var i,o;switch(r){case"#":i=e.nodeValue,o=i.indexOf(me),o!==-1&&(o+1<i.length&&e.splitText(o+1),e.nodeValue=i.substr(0,o));break;case"!":break;case"<":for(var a,l=0;e;e=e.nextSibling)if(l++,3===e.nodeType){if(i=e.nodeValue,l>1&&i===me){a=e.nextSibling,e.parentNode.removeChild(e),l--;break}if(o=i.indexOf(me),o!==-1){o+1<i.length&&e.splitText(o+1),e.nodeValue=i.substr(0,o),a=e.nextSibling;break}}return n.domLength=l,a;default:var f=n.children,d=A(f);if(d>1){f=n.children;for(var u=e.firstChild,c=0,v=f.length;c<v;c++)u=x(u,f[c])}else if(0!==d){var h=s(f,d);t(h)?h||(e.firstChild.nodeValue=""):x(e.firstChild,h)}var g=n.events;if(g){S(e,n,g);var p=g.$created;p&&m(p,"$created",e,n)}}return e.nextSibling}return y(e,n)}function y(e,n){var t,r=n.children,i=A(r);if(0===i)e.length>1&&e.splitText(1),e.nodeValue="",n.dom=e,t=e.nextSibling;else{if(i>1){t=e;for(var o=0;o<r.length;o++)t=x(t,r[o]);e=r[0].dom}else{var l=a(n,s(r,i));t=x(e,l),e=l.dom}n.dom=e;for(var f=0;e!==t;)f++,e=e.nextSibling;n.domLength=f}return t}function C(e){return e=""+e,ae?(de.innerText=e,e=de.innerHTML):e=le?e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function k(e){return e=""+e,e.replace(/-{2,}/g,"-")}function L(e,n){var t=typeof n;return n=""+n,"number"!==t&&(n=le?n.split("&").join("&amp;").split('"').join("&quot;"):n.replace(/&/g,"&amp;").replace(/"/g,"&quot;")),e+'="'+n+'"'}function T(e,n,t,r,i,o){n=d(e,n);var l,u,v,m=A(n);if(r&&(e.ns=r),0===m)l=c(),h(t,l,i,o);else if(m>1){u=0;for(var p=0,b=n.length;p<b;p++)v=f(n,p),g(v,t,r,i,!1),u+=v.domLength||1;l=n[0].dom,o&&I(t,i)}else v=a(e,s(n,m)),g(v,t,r,i,o),l=v.dom,u=v.domLength;e.dom=l,e.domLength=u}function w(e,t,r,i,o,a){var l,f;if(i)for(f in i){var d=!1,s=i[f];if("style"===f){var u=o&&o[f];u!==s&&(d=E(e,u,i,s))}else M(t,f)?e[f]!==s&&(e[f]=s,d=!0):o&&o[f]===s||("class"!==f||r?N(e,f,s):e.className=s,d=!0);d&&a&&(l||(l=[])).push(f)}if(o)for(f in o)i&&i[f]!==n||("class"!==f||r?M(t,f)||e.removeAttribute(f):e.className="",a&&(l||(l=[])).push(f));return l}function N(e,n,t){if(t===!1)e.removeAttribute(n);else{t===!0&&(t="");var r,i=n.indexOf(":");if(i!==-1){var o=n.substr(0,i);switch(o){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,n,t):e.setAttribute(n,t)}}function E(e,r,i,o){var a,l=!1;if(!t(o)&&(!ve||!r||t(r))){var f="";if(o)for(a in o)f+=a+": "+o[a]+"; ";o=f,ve||(i.style=o)}var d=e.style;if(t(o))d.cssText=o,l=!0;else{if(o)for(a in o){var s=o[a];if(!r||r[a]!==s){var u=s.indexOf("!important");if(u!==-1)d.setProperty(a,s.substr(0,u),"important");else{if(r){var c=r[a];c&&c.indexOf("!important")!==-1&&d.removeProperty(a)}d.setProperty(a,s,"")}l=!0}}if(r)for(a in r)o&&o[a]!==n||(d.removeProperty(a),l=!0)}return l}function S(e,n,t,r){var i;if(t){e.virtualNode=n;for(i in t)r&&r[i]||P(e,i)}if(r)for(i in r)t&&t[i]||$(e,i)}function M(e,n){switch(e){case"input":return"value"===n||"checked"===n;case"textarea":return"value"===n;case"select":return"value"===n||"selectedIndex"===n;case"option":return"selected"===n}}function P(e,n){if("$"!==n[0])if(ue)e.addEventListener(n,B,!1);else{var t="on"+n;t in e?e[t]=B:e.attachEvent(t,B)}}function $(e,n){if("$"!==n[0])if(ue)e.removeEventListener(n,B,!1);else{var t="on"+n;t in e?e[t]=null:e.detachEvent(t,B)}}function V(e,n,r,i,o){i=d(n,i);var l=A(i);if(l>1)for(var u=0,c=i.length;u<c;u++)g(f(i,u),e,r);else if(0!==l){var v=s(i,l);!o&&t(v)?O(e,v):(v=a(n,v),g(v,e,r,null,!1,!o))}}function A(e){return r(e)?e.length:e||t(e)?-1:0}function j(e,n,r){r>1?H(e,n,0,n.length):0!==r&&(t(n)?e.removeChild(e.firstChild):I(e,l(n,r,e)))}function H(e,n,t,r){for(;t<r;t++)I(e,n[t])}function I(e,n){G(n);for(var t,r=n.dom,i=n.domLength||1;i--;)t=i>0?r.nextSibling:null,e.removeChild(r),r=t}function O(e,n,t){if(n)se?e.textContent=n:e.innerText=n;else{if(t)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(c())}}function D(e,n,r,i,o,c,v){if(o=d(n,o,i),o!==i){var h=A(i);if(0===h)return void V(e,n,r,o,!1);var m,p,b=A(o);if(0===b)return void j(e,i,h);if(b<2){if(p=s(o,b),!c&&t(p)){if(b===h){if(m=s(i,h),p===m)return;if(t(m))return void(e.firstChild.nodeValue=p)}return J(i,h),void O(e,p,!0)}if(h<2)return m=l(i,h,e),p=a(n,p,m),void W(m,p,e,r,null,0,v,!c)}b===-1&&(n.children=o=[o]),h<2&&(m=l(i,h,e),1===h?i[0]=m:i=[m]);var x,y=i.length,C=o.length,k=y-1,L=o.length-1,T=0,w=0,N=!0;e:for(;N&&T<=k&&w<=L;){N=!1;var E,S,M,P;for(E=i[T],M=f(o,w,E);E.key===M.key;){if(W(E,M,e,r,i,T+1,v),T++,w++,T>k||w>L)break e;E=i[T],M=f(o,w,E),N=!0}for(S=i[k],P=f(o,L);S.key===P.key;){if(W(S,P,e,r,o,L+1,v),k--,L--,T>k||w>L)break e;S=i[k],P=f(o,L),N=!0}for(;E.key===P.key;){if(x=L+1<C?o[L+1]:v,W(E,P,e,r,null,0,x),u(e,P,x),T++,L--,T>k||w>L)break e;E=i[T],P=f(o,L),N=!0}for(;S.key===M.key;){if(x=T<y?i[T]:v,W(S,M,e,r,null,0,x),u(e,M,x),k--,w++,T>k||w>L)break e;S=i[k],M=f(o,w),N=!0}}var $;if(T>k)for(x=L+1<C?f(o,L+1):v,$=w;$<=L;$++)g(f(o,$),e,r,x);else if(w>L)H(e,i,T,k+1);else{var D,B=i[k+1],_={},q=0;for($=k;$>=T;$--)m=i[$],D=m.key,m.next=B,void 0===D?(_[he+q]=m,q++):_[m.key]=m,B=m;for(x=L+1<C?f(o,L+1):v,$=L;$>=w;$--)p=o[$],D=p.key,void 0===D&&(q--,D=he+q),m=_[D],m?(_[D]=null,W(m,p,e,r,null,0,x),e.nextSibling!=(x&&x.dom)&&u(e,p,x)):g(p,e,r,x),x=p;for($=T;$<=k;$++)m=i[$],D=m.key,null!==(void 0===D?_[he+q++]:_[D])&&I(e,m)}}}function B(e){e=K(e,this);var n=e.currentTarget,t=n.virtualNode.events[e.type];if(r(t)){for(var i=0,o=t.length;i<o;i++)if(U(t[i],n,e),pe){pe=!1;break}}else U(t,n,e)}function _(){return this.defaultPrevented}function q(){this.defaultPrevented=!0,this.returnValue=!1}function F(){this.cancelBubble=!0}function R(){pe=!0,this.stopPropagation()}function K(n,t){return n||(n=e.event,n.preventDefault||(n.preventDefault=q,n.stopPropagation=F,n.defaultPrevented=n.returnValue===!1,n.target=n.srcElement),n.currentTarget=t.nodeType?t:n.target),n.isDefaultPrevented||(n.isDefaultPrevented=_),n.stopImmediatePropagation=R,n}function U(e,n,t){try{e.call(n,t)===!1&&t.preventDefault()}catch(r){ie.error(r.stack||r)}}function W(e,t,r,i,o,a,l,f){if(t!==e){var d=t.tag;if(e.tag!==d)g(t,r,i,e,!0);else{var s=e.dom,u=e.children,c=t.children;switch(d){case n:var v=o&&a<o.length?o[a]:l;z(e,u,t,c,r,i,v);break;case"#":case"!":u!==c&&(s.nodeValue=c),t.dom=s;break;case"<":u!==c?g(t,r,null,e,!0,f):(t.dom=e.dom,t.domLength=e.domLength);break;default:var h=t.attrs,p=e.attrs;if((h&&h.is)!==(p&&p.is))return void g(t,r,i,e,!0);var b=e.ns;b&&(t.ns=b),t.dom=s,c!==u&&D(s,t,b,u,c,!1);var x=t.events,y=e.events;if(h!==p){var C=x&&x.$changed,k=w(s,d,b,h,p,!!C);k&&m(C,"$changed",s,t,"changes",k)}x!==y&&S(s,t,x,y),void 0!==x&&void 0!==x.$subtreeModified&&m(x.$subtreeModified,"$subtreeModified",s,t)}}}}function z(e,n,t,i,o,a,l){if(i=d(t,i,n),i!==n){var f,s,u=A(i),v=A(n);if(a&&(t.ns=a),0===u)0===v?f=e.dom:(j(o,n,v),f=c(),h(o,f,l));else{if(0===v)return o.removeChild(e.dom),void T(t,i,o,a,l);if(D(o,t,a,n,i,!0,l),i=t.children,r(i)){f=i[0].dom,s=0;for(var g=0,m=i.length;g<m;g++)s+=i[g].domLength||1}else f=i.dom,s=i.domLength}t.dom=f,t.domLength=s}}function G(e){if(!t(e)){var r=e.dom;if(r){var i=e.events;if(i){for(var o in i)$(r,o);var a=i.$destroyed;a&&m(a,"$destroyed",r,e)}r.virtualNode&&(r.virtualNode=n)}var l=e.children;l&&J(l,A(l))}}function J(e,n){if(n>1)for(var t=0,r=e.length;t<r;t++)G(e[t]);else 0!==n&&G(s(e,n))}function Q(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}function X(e){e&&e!=ne.body&&e!=ne.activeElement&&e.focus()}var Y,Z,ee={},ne=e.document,te=e.navigator,re=function(){},ie=e.console||{warn:re,error:re},oe=te.userAgent,ae=oe.indexOf("WebKit")!==-1,le=oe.indexOf("Firefox")!==-1,fe=oe.indexOf("Trident")!==-1,de=ne.createElement("div"),se="textContent"in ne,ue="addEventListener"in ne,ce="createRange"in ne,ve="setProperty"in de.style,he="__UNDEF__:",ge=ne.createElement("p");ge.insertAdjacentHTML&&(ge.appendChild(ne.createTextNode("a")),ge.insertAdjacentHTML("beforeend","b"),Y=1===ge.childNodes.length,ge=ne.createElement("p"),ge.appendChild(c()),ge.insertAdjacentHTML("beforeend","<b>"),Z=3!==ge.firstChild.nodeType);var me="",pe=(ce?ne.createRange():null,!1);ee.vdom={create:function(e){return e=o(e),g(e),e},append:function(e,n){return n=o(n),g(n,e),n},update:function(e,n){var t=ne.activeElement;return n=o(n,e),W(e,n,e.dom.parentNode),Q(n,e),X(t),e},updateChildren:function(e,n){var t=ne.activeElement,r=e.children;r!==n&&D(e.dom,e,e.ns,r,n,!e.tag),X(t)},remove:function(e){var n=e.dom.parentNode;I(n,e)}};return ee});